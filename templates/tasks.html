<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="container">
        <h1>All Tasks</h1>

        <section>
            <h2>Task 1: Books Published in 2022</h2>
            <ul>
                {% for book in books_in_2022 %}
                    <li>{{ book.title }} by <span style="font-weight: bold;">{{ book.author }}</span></li>
                {% empty %}
                    <li>No books published in 2022.</li>
                {% endfor %}
            </ul>
        </section>
    
        <section>
            <h2>Task 2: Average Price Before 2010</h2>
            <p>Average Price: ${{ average_price_before_2010 }}</p>
        </section>
    
        <section>
            <h2>Task 3: Books with Lowest Stock</h2>
            <ul>
                {% for book in books_with_lowest_stock %}
                    <li>{{ book.title }} (Available Quantity: {{ book.available_quantity }})</li>
                {% empty %}
                    <li>No books with low stock.</li>
                {% endfor %}
            </ul>
        </section>
    
        <section>
            <h2>Task 4: Customer with Highest Purchase</h2>
            {% if customer_highest_purchase %}
                <p>Customer: {{ customer_highest_purchase.first_name }} {{ customer_highest_purchase.last_name }}</p>
                <p>Total Amount Spent: ${{ customer_highest_purchase.total_spent }}</p>
            {% else %}
                <p>No customer data available.</p>
            {% endif %}
        </section>
    
        <section>
            <h2>Task 5: Customers Registered in 2023</h2>
            <ul>
                {% for customer in customers_registered_in_2023 %}
                    <li>{{ customer.first_name }} {{ customer.last_name }}</li>
                {% empty %}
                    <li>No customers registered in 2023.</li>
                {% endfor %}
            </ul>
        </section>
    
        <section>
            <h2>Task 6: Total Orders</h2>
            <p>Total Orders: {{ total_orders }}</p>
        </section>
    
        <section>
            <h2>Task 7: Revenue in 2022</h2>
            <p>Total Revenue in 2022: ${{ revenue_in_2022 }}</p>
        </section>
    
        <section>
            <h2>Task 8: Top 5 Bestsellers</h2>
            <ol>
                {% for book in top_bestsellers %}
                    <li>{{ book.book_id__title }} by {{ book.book_id__author }} (Total Sold: {{ book.total_sold }})</li>
                {% empty %}
                    <li>No bestselling books data available.</li>
                {% endfor %}
            </ol>
        </section>
    
        <section>
            <h2>Task 9: Revenue by Year (2020-2022)</h2>
            <ul>
                {% for revenue in revenue_2020_to_2022 %}
                    <li>Year: {{ revenue.order_year }}, Total Revenue: ${{ revenue.total_revenue }}</li>
                {% empty %}
                    <li>No revenue data available.</li>
                {% endfor %}
            </ul>
        </section>
    
        <section>
            <h2>Task 10: Customers with Most Orders</h2>
            <ol>
                {% for customer in customers_with_most_orders %}
                    <li>{{ customer.first_name }} {{ customer.last_name }} (Total Orders: {{ customer.total_orders }})</li>
                {% empty %}
                    <li>No customer data available.</li>
                {% endfor %}
            </ol>
        </section>
    </div>
</body>
</html>